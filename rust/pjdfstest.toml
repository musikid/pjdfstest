# Configuration for the pjdfstest runner

# This section allows enabling file system specific features.
# Please see the book for more details.
# A list of these features is provided when executing the runner with `-l`.
[features]
# File flags can be specified for OS which supports them.
file_flags = ["SF_IMMUTABLE", "SF_NOUNLINK", "SF_APPEND"]
# Here is an example with the `posix_fallocate` syscall.
posix_fallocate = {}

[features.eperm.syscalls_flags.chmod]
file = ["SF_IMMUTABLE"] 

[features.eperm.syscalls_flags.ftruncate]
file = ["SF_IMMUTABLE"] 

[features.eperm.syscalls_flags.link]
file = ["SF_IMMUTABLE"] 
parent = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.mkdir]
parent = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.mkfifo]
parent = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.mknod]
parent = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.rename]
to = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.symlink]
parent = ["SF_IMMUTABLE"]

[features.eperm.syscalls_flags.unlink]
file = ["SF_IMMUTABLE", "SF_NOUNLINK"]
parent = ["SF_IMMUTABLE"]

# Might use the key notation as well.
# [features.chflags]

[settings]
# naptime is the duration of various short sleeps.  It should be greater than
# the timestamp granularity of the file system under test.
naptime = 0.001
# Enable the EROFS tests, which temporarily remount the file system as read-only.
# erofs = true

# This section allows to modify the mecanism for switching users, which is required by some tests.
# [dummy_auth]
# An entry is the name of a user and its associated group.
# For now, the array requires exactly 3 entries.
# Please see the book for more details.
# entries = [
#   ["nobody", "nobody"],
#   nogroup instead for some Linux distros
#   ["nobody", "nogroup"],
#   ["tests", "tests"],
#   ["pjdfstest", "pjdfstest"],
# ]